<html>
<head>
	<title>Lista de Posts</title>
	<link rel="stylesheet" href="../estilo.css">

	<!--
<script>
	function loadDoc() {	
	  var xhttp = new XMLHttpRequest();
	  xhttp.onreadystatechange = function() {		
		if (this.readyState == 4 && this.status == 200) {
		  var obj = JSON.parse(this.responseText);
		  var aux = obj[0].body;
		 // var document.forms["uNome"]["nome"].innerHTML;
		 alert("tetse");
		  document.getElementById("uNome").innerHTML = obj[0].name;
		}
	  };
	  xhttp.open("GET", "https://jsonplaceholder.typicode.com/posts/1/comments?id=1", false);
	  xhttp.send();
	}
</script>
-->

	<script>
		function loadPosts() {
			var xhttp = new XMLHttpRequest();

			
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var posts = JSON.parse(this.responseText); // var 'posts' recebe todo o arquivo JSON
					var postsHtml = document.getElementById('posts'); // var 'postsHtml' recebe todo o conteúdo do elemento 'posts';
					var imagens = loadImages(); // var 'imagens' recebe todas as imagens da função 'loadImages()'

					// for (var i = 0; i < posts.length; i++) {
					for (var i = 0; i < posts.length; i++) {
						var post = posts[i]; 
						// console.log(post.userId);
						// console.log(post.id);
						// console.log(post.title);
						// console.log(post.body);
						//------------------------------------------
						//var liHtml = document.createElement('li');
						//liHtml.innerHTML = post.title;
						//postsHtml.appendChild(liHtml);
						//-------------------------------------------
						var dtHtml = document.createElement('dt');
						var index = Math.floor((Math.random() * 100) + 1);
						
						/*
						var repit = [];
						// Erro de repitções nas fotos;
						for (var x = 0; x < posts.length; ) {
							if () {

							}
						}
						*/


						dtHtml.innerHTML =  "<img src='" + imagens[index] + "' style='width: 32px; height: 32px;'></img>";//"Usuário: " + post.id;
						postsHtml.appendChild(dtHtml);
						var ddHtml = document.createElement('dd');
						ddHtml.innerHTML = "Título: " + post.title + "." + "</br></br>" + "Comentários: " + post.body + ".";
						postsHtml.appendChild(ddHtml);
					}
					
				}				
			};
			
			xhttp.open("GET", "https://jsonplaceholder.typicode.com/posts", false);
			xhttp.setRequestHeader("Content-type", "application/json");
			xhttp.send();
		}

		function loadImages() {
			var xhttp = new XMLHttpRequest();
			var images = [];
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var users = JSON.parse(this.responseText).results;
					for (var i = 0; i < users.length; i++) {
						images.push(users[i].picture.large);
					}

					//var usersHtml = document.getElementById('users');
                    // *** var imagens = [];
					//var user = users[0];
					//console.log("user",user);
						// console.log(post.userId);
						// console.log(post.id);
						// console.log(post.title);
						// console.log(post.body);
						//------------------------------------------
						//var liHtml = document.createElement('li');
                        //liHtml.innerHTML = user.picture.medium;
						//usersHtml.appendChild(liHtml);

					/*
					for (var i = 0; i < users.length; i++) {
						var user = users[i];
						// console.log(post.userId);
						// console.log(post.id);
						// console.log(post.title);
						// console.log(post.body);
						//------------------------------------------
						var liHtml = document.createElement('li');
                        liHtml.innerHTML = user.picture.medium;
						usersHtml.appendChild(liHtml);
                        // *** imagens.push(user.picture.medium);
                        // *** console.log("imagens",imagens[10]);

						//-------------------------------------------
						//var dtHtml = document.createElement('dt');
						//dtHtml.innerHTML = "Usuário: " + post.id;
						//postsHtml.appendChild(dtHtml);
						//var ddHtml = document.createElement('dd');
						//ddHtml.innerHTML = "Título: " + post.title + "." + "</br>" + "Comentários: " + post.body + ".";
						//postsHtml.appendChild(ddHtml);
					}
					*/
					//console.log("usersHtml", user.picture.medium);
				}
			};
			xhttp.open("GET", "https://randomuser.me/api/?results=100", false);
			xhttp.setRequestHeader("Content-type", "application/json");
			xhttp.send();

			return images;			
		}
	</script>
</head>
<body>
<!-- body onload="loadPosts()" -->
	<!-- <a href="/comments/comments.html">Comentários</a> -->
	<!--<ul id="posts"></ul>-->
	<dl id="posts"></dl>
</body>
</html>