function loadPosts() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var posts = JSON.parse(this.responseText); // var 'posts' recebe todo o arquivo transformado do JSON para javaScript;
            var postsHtml = document.getElementById('comentarios'); // var 'postsHtml' recebe todo o conteúdo do elemento 'posts';
            var imagens = loadImages(); // var 'imagens' recebe todas as imagens da função 'loadImages()';

            
            for (var i = 0; i < posts.length; i++) {
                var post = posts[i]; 
                
                var index = Math.floor((Math.random() * 100) + 1);
                var areaPost = document.createElement('div');
                areaPost.classList.add("bloco1");
                /*
                var repit = [];
                // Erro de repitções nas fotos;
                for (var x = 0; x < posts.length; ) {
                    if () {

                    }
                }
                */

                var dtHtml = document.createElement('dt');
                dtHtml.innerHTML =  "<img src='" + imagens[index] + "' style='width: 32px; height: 32px;'></img>";//"Usuário: " + post.id;
                areaPost.appendChild(dtHtml);
                var ddHtml = document.createElement('dd');
                ddHtml.innerHTML = "<span>Título:</span> " + post.title + "." + "</br></br>" + post.body + ".";
                areaPost.appendChild(ddHtml);
                var botao = document.createElement('button');
                botao.innerHTML = "Comentar";//"<button id='comentar' type='button' name='addComentario' onclick=''>Comentar</button>";
                botao.classList.add("comentar");
                botao.addEventListener("click", function() {comentar();});
                areaPost.appendChild(botao);
                postsHtml.appendChild(areaPost);
                var caixaComentario = document.createElement('div');
                caixaComentario.classList.add("bloco2");
                postsHtml.appendChild(caixaComentario);
            }
        }				
    };
    
    xhttp.open("GET", "https://jsonplaceholder.typicode.com/posts", false);
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send();
}

function loadImages() {
    var xhttp = new XMLHttpRequest();
    var images = [];
    xhttp.onreadystatechange = function() {
        if (this.readyState == 4 && this.status == 200) {
            var users = JSON.parse(this.responseText).results;
            for (var i = 0; i < users.length; i++) {
                images.push(users[i].picture.large);
            }
        }
    };
    xhttp.open("GET", "https://randomuser.me/api/?results=100", false);
    xhttp.setRequestHeader("Content-type", "application/json");
    xhttp.send();

    return images;			
}

function moreComments() {
    var alturaAtual = document.getElementById('comentarios').clientHeight;
    var altura = soma(alturaAtual);
    document.getElementById('comentarios').style.height = altura;

    function soma(n) {
        var s = (n + 1440);
        var y = document.getElementById('comentarios').scrollHeight;
        if (s > y) {
            s = y + 'px';
        } else {
            s = s + 'px';
        }
        return s;
    };
}

function comentar() {
    alert("teste");
    var x = document.getElementsByName("bloco2");
    x.style.display = "none";
    return x;
}